(_vm.panelLoadFinish && _vm.userLoadFinish)?_c('div',{staticClass:"new-task-form"},[_c('el-form',{ref:"taskForm",staticClass:"de-form-item",attrs:{"model":_vm.form,"rules":_vm.rule,"size":"small","label-width":"100px"}},[_c('div',{staticClass:"row-rules marTop0"},[_c('span',[_vm._v(_vm._s(_vm.$t(")))])]),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('xpacktask.name'),"prop":"taskName"}},[_c('el-input',{on:{"input":_vm.setTitle},model:{value:(_vm.form.taskName),callback:function ($$v) {_vm.$set(_vm.form, "taskName", $$v)},expression:"form.taskName"}})],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.title'),"prop":"title"}},[_c('el-input',{model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, "title", $$v)},expression:"form.title"}})],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.content'),"prop":"content"}},[_c('el-input',{directives:[{name:"count",rawName:"v-count",value:(_vm.htmlContent),expression:"htmlContent"}],attrs:{"placeholder":_vm.$t('fu.search_bar.please_input'),"show-word-limit":"","type":"textarea","maxlength":"200"},model:{value:(_vm.htmlContent),callback:function ($$v) {_vm.htmlContent=$$v},expression:"htmlContent"}})],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.panel'),"prop":"panelId"}},[_c('treeselect',{ref:"panelTreeSelect",staticClass:"email-task-tree",attrs:{"size":"mini","options":_vm.panelDatas,"disable-branch-nodes":true,"show-count":true,"placeholder":_vm.$t('commons.please_select') + _vm.$t('emailtask.panel')},model:{value:(_vm.form.panelId),callback:function ($$v) {_vm.$set(_vm.form, "panelId", $$v)},expression:"form.panelId"}})],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('chart.chart'),"prop":"viewIds"}},[(_vm.viewLoaded)?_c('de-view-select',{attrs:{"panel-id":_vm.form.panelId},model:{value:(_vm.form.viewIds),callback:function ($$v) {_vm.$set(_vm.form, "viewIds", $$v)},expression:"form.viewIds"}}):_vm._e()],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.pixel'),"prop":"pixel"}},[_c('el-select',{staticStyle:{"width":"100%"},attrs:{"filterable":"","clearable":"","allow-create":"","placeholder":_vm.$t('emailtask.pixel_tip'),"popper-append-to-body":false},model:{value:(_vm.form.pixel),callback:function ($$v) {_vm.$set(_vm.form, "pixel", $$v)},expression:"form.pixel"}},_vm._l((_vm.pixelOptions),function(group){return _c('el-option-group',{key:group.label,attrs:{"label":group.label}},_vm._l((group.options),function(item){return _c('el-option',{key:item.value,attrs:{"label":item.label,"value":item.value}})}),1)}),1)],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.recisetting'),"prop":"recisetting"}},[_c('el-checkbox-group',{model:{value:(_vm.form.recisetting),callback:function ($$v) {_vm.$set(_vm.form, "recisetting", $$v)},expression:"form.recisetting"}},[_c('el-checkbox',{attrs:{"label":"email"}},[_vm._v(_vm._s(_vm.$t('emailtask.email')))]),_vm._v(" "),_c('el-checkbox',{attrs:{"label":"wecom"}},[_vm._v(_vm._s(_vm.$t('emailtask.wecom')))]),_vm._v(" "),_c('el-checkbox',{attrs:{"label":"dingtalk"}},[_vm._v(_vm._s(_vm.$t('emailtask.dingtalk')))]),_vm._v(" "),_c('el-checkbox',{attrs:{"label":"lark"}},[_vm._v(_vm._s(_vm.$t('emailtask.lark')))])],1)],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.recipients'),"prop":"userValues"}},[_c('el-select',{ref:"userSelect",staticStyle:{"width":"100%"},attrs:{"filterable":"","allow-create":"","multiple":"","popper-append-to-body":false,"placeholder":_vm.$t('commons.please_select') + _vm.$t('emailtask.recipients')},on:{"remove-tag":_vm.deleteTag,"change":_vm.changeRecip},model:{value:(_vm.form.userValues),callback:function ($$v) {_vm.$set(_vm.form, "userValues", $$v)},expression:"form.userValues"}},_vm._l((_vm.users),function(item){return _c('el-option',{key:item.nickName,attrs:{"label":item.nickName,"value":item.username}})}),1)],1),_vm._v(" "),_c('div',{staticClass:"row-rules marTop0"},[_c('span',[_vm._v(_vm._s(_vm.$t(")))])]),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.rate_type'),"prop":"rateType"}},[_c('el-radio-group',{model:{value:(_vm.rateType),callback:function ($$v) {_vm.rateType=$$v},expression:"rateType"}},_vm._l((_vm.rateTypeList),function(rate){return _c('el-radio',{key:rate.label,attrs:{"label":rate.value}},[_vm._v(_vm._s(_vm.$t(rate.label)))])}),1),_vm._v(" "),_c('div',{staticClass:"rate-type-time"},[(_vm.rateType === 'cron_exp')?_c('el-input',{staticStyle:{"width":"100%"},model:{value:(_vm.form.rateVal),callback:function ($$v) {_vm.$set(_vm.form, "rateVal", $$v)},expression:"form.rateVal"}}):[_c('el-select',{staticClass:"w140",model:{value:(_vm.timeTypeValue),callback:function ($$v) {_vm.timeTypeValue=$$v},expression:"timeTypeValue"}},_vm._l((_vm.timeType),function(item){return _c('el-option',{key:item.value,attrs:{"label":item.label,"value":item.value}})}),1),_vm._v(" "),(_vm.timeTypeValue === 1)?_c('el-select',{staticClass:"w140",model:{value:(_vm.weekTypeValue),callback:function ($$v) {_vm.weekTypeValue=$$v},expression:"weekTypeValue"}},_vm._l((_vm.weekType),function(item){return _c('el-option',{key:item.value,attrs:{"label":item.label,"value":item.value}})}),1):_vm._e(),_vm._v(" "),(_vm.timeTypeValue === 2)?_c('el-select',{staticClass:"w140",model:{value:(_vm.monthTypeValue),callback:function ($$v) {_vm.monthTypeValue=$$v},expression:"monthTypeValue"}},_vm._l((_vm.monthType),function(item){return _c('el-option',{key:item.value,attrs:{"label":item.label,"value":item.value}})}),1):_vm._e(),_vm._v(" "),_c('el-time-picker',{staticClass:"w140",attrs:{"picker-options":{
              selectableRange: '00:00:00 - 23:59:59',
            }},model:{value:(_vm.timePicker),callback:function ($$v) {_vm.timePicker=$$v},expression:"timePicker"}}),_vm._v(" "),_c('span',{staticClass:"tail"},[_vm._v(_vm._s(_vm.$t('cron.every_exec')))])]],2)],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.start_time'),"prop":"startTime"}},[_c('el-date-picker',{staticClass:"de-time-range",attrs:{"type":"datetime","picker-options":_vm.startPickerOptions,"placeholder":_vm.$t('commons.please_select') + _vm.$t('emailtask.start_time')},model:{value:(_vm.form.startTime),callback:function ($$v) {_vm.$set(_vm.form, "startTime", $$v)},expression:"form.startTime"}})],1),_vm._v(" "),_c('el-form-item',{attrs:{"label":_vm.$t('emailtask.end_time'),"prop":"endTime"}},[_c('el-date-picker',{staticClass:"de-time-range",attrs:{"type":"datetime","picker-options":_vm.startPickerOptions,"popper-class":"link-date-picker-class","placeholder":_vm.$t('commons.please_select') + _vm.$t('emailtask.end_time'),"default-time":"23:59:59"},model:{value:(_vm.form.endTime),callback:function ($$v) {_vm.$set(_vm.form, "endTime", $$v)},expression:"form.endTime"}})],1)],1),_vm._v(" "),_c('el-dialog',{attrs:{"title":_vm.$t('emailtask.emial_preview'),"visible":_vm.previewDialog,"width":"80%"},on:{"update:visible":function($event){_vm.previewDialog=$event}}},[_c('div',{domProps:{"innerHTML":_vm._s(_vm.previewHtml)}},[_vm._v(_vm._s(_vm.previewHtml))])]),_vm._v(" "),_c('div',{staticClass:"de-foot-layout"},[_c('div',{staticClass:"cont"},[_c('deBtn',{attrs:{"secondary":""},on:{"click":_vm.reset}},[_vm._v(_vm._s(_vm.$t("commons.cancel")))]),_vm._v(" "),_c('deBtn',{attrs:{"secondary":""},on:{"click":_vm.preview}},[_vm._v(_vm._s(_vm.$t(")))]),_vm._v(" "),_c('deBtn',{attrs:{"type":"primary"},on:{"click":_vm.save}},[_vm._v(_vm._s(_vm.$t("commons.confirm")))])],1)])],1):_vm._e()